{"ast":null,"code":"var _asyncToGenerator = require(\"C:/Users/user/Downloads/pdf-csv-mapper-angular-php/pdf-csv-mapper-angular-php/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n/**\n * readFromBlobOrFile\n *\n * @name readFromBlobOrFile\n * @function\n * @access private\n */\nconst readFromBlobOrFile = blob => new Promise((resolve, reject) => {\n  const fileReader = new FileReader();\n  fileReader.onload = () => {\n    resolve(fileReader.result);\n  };\n  fileReader.onerror = ({\n    target: {\n      error: {\n        code\n      }\n    }\n  }) => {\n    reject(Error(`File could not be read! Code=${code}`));\n  };\n  fileReader.readAsArrayBuffer(blob);\n});\n\n/**\n * loadImage\n *\n * @name loadImage\n * @function load image from different source\n * @access private\n */\nconst _loadImage = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (image) {\n    let data = image;\n    if (typeof image === 'undefined') {\n      return 'undefined';\n    }\n    if (typeof image === 'string') {\n      // Base64 Image\n      if (/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\n        data = atob(image.split(',')[1]).split('').map(c => c.charCodeAt(0));\n      } else {\n        const resp = yield fetch(image);\n        data = yield resp.arrayBuffer();\n      }\n    } else if (typeof HTMLElement !== 'undefined' && image instanceof HTMLElement) {\n      if (image.tagName === 'IMG') {\n        data = yield _loadImage(image.src);\n      }\n      if (image.tagName === 'VIDEO') {\n        data = yield _loadImage(image.poster);\n      }\n      if (image.tagName === 'CANVAS') {\n        yield new Promise(resolve => {\n          image.toBlob(/*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator(function* (blob) {\n              data = yield readFromBlobOrFile(blob);\n              resolve();\n            });\n            return function (_x2) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n        });\n      }\n    } else if (typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas) {\n      const blob = yield image.convertToBlob();\n      data = yield readFromBlobOrFile(blob);\n    } else if (image instanceof File || image instanceof Blob) {\n      data = yield readFromBlobOrFile(image);\n    }\n    return new Uint8Array(data);\n  });\n  return function loadImage(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nmodule.exports = _loadImage;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}